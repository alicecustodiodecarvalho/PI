<!DOCTYPE html>
<html lang="pt-br">

<head>
    <title>Controle de ingressos</title>
    <!-- HTML5 Shim and Respond.js IE10 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 10]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="#">
    <meta name="keywords"
        content="Admin , Responsive, Landing, Bootstrap, App, Template, Mobile, iOS, Android, apple, creative app">
    <meta name="author" content="#">
    <!-- Favicon icon -->
    <!-- <link rel="icon" href="..\adminty-dashboard-master\files\assets\images\favicon.ico" type="image/x-icon"> -->
    <!-- Google font-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,800" rel="stylesheet">
    <!-- Required Fremwork -->
    <link rel="stylesheet" type="text/css" href="files\bower_components\bootstrap\css\bootstrap.min.css">
    <!-- themify-icons line icon -->
    <link rel="stylesheet" type="text/css" href="files\assets\icon\themify-icons\themify-icons.css">
    <!-- ico font -->
    <link rel="stylesheet" type="text/css" href="files\assets\icon\icofont\css\icofont.css">
    <!-- feather Awesome -->
    <link rel="stylesheet" type="text/css" href="files\assets\icon\feather\css\feather.css">
    <!-- Data Table Css -->
    <link rel="stylesheet" type="text/css"
        href="files\bower_components\datatables.net-bs4\css\dataTables.bootstrap4.min.css">
    <link rel="stylesheet" type="text/css" href="files\assets\pages\data-table\css\buttons.dataTables.min.css">
    <link rel="stylesheet" type="text/css"
        href="files\bower_components\datatables.net-responsive-bs4\css\responsive.bootstrap4.min.css">
    <!-- Style.css -->
    <link rel="stylesheet" type="text/css" href="files\assets\css\style.css">
    <link rel="stylesheet" type="text/css" href="files\assets\css\jquery.mCustomScrollbar.css">

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet" />

    <link rel="stylesheet" href="css/style.css">

    <link href="files/fontawesome/css/all.css" rel="stylesheet">

</head>

<body>
    <!-- Pre-loader start -->
    <div class="theme-loader">
        <div class="ball-scale">
            <div class='contain'>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Pre-loader end -->
    <!-- tabela 1 -->
    <div id="pcoded" class="pcoded">
        <div class="pcoded-overlay-box"></div>
        <div class="pcoded-container navbar-wrapper" style="background-color: #fff7da;">

            <!-- <div class="container" style="background-color: #fff7da;">
                <header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-0 mb-0">
                  <div class="logo">
                    <img src="img/logoPI.png" alt="" width="150px" height="150px" />
                  </div>
            
                  <ul class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0">
                    <li><a href="index.html" class="nav-link px-3" id="home">Home</a></li>
                    <li><a href="#" class="nav-link px-3">Mapa</a></li>
                    <li><a href="#" class="nav-link px-3">Hotel</a></li>
                    <li><a href="#" class="nav-link px-3">Atrações</a></li>
                    <li><a href="login-adm.html" class="nav-link px-3">Ingressos</a></li>
                    <li><a href="#" class="nav-link px-3">Contato</a></li>
                  </ul>
            
                  <div class="col-sm-2 text-end">
                    <a href="pag-login.html" class="btn btn-outline-primary me-2">
                        Login
                    </a>
                    <a href="pag-sign-up.html" class="btn btn-primary">
                        Sign-up
                    </a>
                  </div>
                </header>
            </div>

            <hr class="border-2 opacity-100" style="margin: 0; color: black;"> -->

            <div class="pcoded-main-container">
                <div class="pcoded-wrapper">
                    <!-- tinha nav menu esquerdo -->
                    <div class="pcoded-inner-content">
                        <!-- Main-body start -->
                        <div class="main-body">
                            <div class="page-wrapper">
                                <!-- Page-header start -->
                                <div class="page-header">
                                    <div class="row align-items-end"
                                        style="display: flex; justify-content: flex-start;">
                                        <div class="col-lg-8">
                                            <div class="page-header-title">
                                                <div class="d-inline">
                                                    <h4 style="font-size: 40px; color: black;">Controle de ingressos
                                                    </h4>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- tinha menu direito  -->
                                    </div>
                                </div>
                                <!-- Page-header end -->

                                <!-- Page-body start -->
                                <!-- tabela 1 -->
                                <div class="page-body">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <!-- Zero config.table start -->
                                            <div class="card" style="border: black solid 1px;">
                                                <div class="card-header">
                                                    <h5 style="font-size: 30px;">Ingressos comprados</h5>
                                                </div>
                                                <div class="card-block">
                                                    <div class="dt-responsive table-responsive">
                                                        <table class="table table-striped table-bordered nowrap">
                                                            <thead>
                                                                <tr>
                                                                    <th>Nome</th>
                                                                    <th>Tipo</th>
                                                                    <th>QTD</th>
                                                                    <th>Data da compra</th>
                                                                    <th>Valor</th>
                                                                    <th>Editar</th>
                                                                    <th>Excluir</th>
                                                                    <th><a href="#" style="font-size: 20px;"> <i
                                                                                id="btnAbrirModalAdicionar"
                                                                                class="fa-solid fa-user-plus"></i>
                                                                            Criar</a>
                                                                    </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="lista-users1">
                                                                <tr>
                                                                    <td>Usuário teste</td>
                                                                    <td>Comum</td>
                                                                    <td>1</td>
                                                                    <td>2024/05/25</td>
                                                                    <td>$20,00</td>
                                                                    <td> <button type="button"><i
                                                                                class="btn-abrirEditar"
                                                                                class="icofont icofont-edit-alt"></i></button>
                                                                    </td>
                                                                    <td>
                                                                        <button type="button" id="btn-excluir"class="btn-excluir">
                                                                            <i class="icofont icofont-delete-alt"></i>
                                                                        </button>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                            <tfoot>
                                                                <tr>
                                                                    <th>Nome</th>
                                                                    <th>Tipo</th>
                                                                    <th>QTD</th>
                                                                    <th>Data da compra</th>
                                                                    <th>Valor</th>
                                                                    <th>Editar</th>
                                                                    <th>Excluir</th>
                                                                </tr>
                                                            </tfoot>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Zero config.table end -->
                                            <!-- tinha outras tabelas -->
                                        </div>
                                    </div>
                                </div>
                                <!-- fim tabela 1 -->

                                <!-- tabela 2 -->
                                <div class="page-body">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <!-- Zero config.table start -->
                                            <div class="card" style="border: black solid 1px;">
                                                <div class="card-header">
                                                    <h5 style="font-size: 30px;">Funcionários</h5>
                                                </div>
                                                <div class="card-block">
                                                    <div class="dt-responsive table-responsive">
                                                        <table class="table table-striped table-bordered nowrap">
                                                            <thead>
                                                                <tr>
                                                                    <th>Nome</th>
                                                                    <th>Tipo</th>
                                                                    <th>Editar</th>
                                                                    <th>Excluir</th>
                                                                    <th><a href="#" style="font-size: 20px;"> <i
                                                                                class="fa-solid fa-user-plus"></i> Criar
                                                                        </a></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody id="lista-users2">
                                                                <tr>
                                                                    <td>Usuário teste</td>
                                                                    <td>Comum</td>
                                                                    <td> <a href="#!"><i
                                                                                class="icofont icofont-edit-alt"></i></a>
                                                                    </td>
                                                                    <td> <a href="#!"><i
                                                                                class="icofont icofont-delete-alt"></i></a>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                            <tfoot>
                                                                <tr>
                                                                    <th>Nome</th>
                                                                    <th>Tipo</th>
                                                                    <th>Editar</th>
                                                                    <th>Excluir</th>
                                                                </tr>
                                                            </tfoot>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- Zero config.table end -->
                                            <!-- tinha outras tabelas -->
                                        </div>
                                    </div>
                                </div>
                                <!-- fim tabela 2 -->
                            </div>
                        </div>
                        <!-- Page-body end -->
                    </div>
                    <!-- Main-body end -->
                    <div id="styleSelector">

                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- modal (editar/excluir/add)  -->
    <div id="modal-editar" class="modal">
        <div class="modal-content-editar">
            <span class="close-editar">&times;</span>
            <h2>Editar usuario</h2>
            <form id="form-editar">
                <label for="id">ID:</label>
                <input type="text" id="id" readonly />

                <label for="nome">Nome:</label>
                <input type="text" id="nome" required />

                <label for="email">Email:</label>
                <input type="text" id="email" required />

                <input class="btn-editar" type="submit" value="Editar">

                <!-- <button type="button" id="btn-excluir" class="btn-excluir">Excluir</button>  -->
            </form>
        </div>
    </div>
    <div id="modalAdicionar" class="modal">
        <div class="modal-content-adicionar">
            <span class="close-adicionar">&times;</span>
            <h2>Adicionar Usuário</h2>
            <form id="formAdicionar">
                <label for="nome">Nome:</label>
                <input type="text" id="nomeAdicionar" required>

                <label for="Nome de usuário">Nome de Usuário:</label>
                <input type="text" id="nome_usuarioAdicionar" required>

                <label for="email">E-mail:</label>
                <input type="email" id="emailAdicionar" required>


                <button type="submit">Adicionar</button>
            </form>
        </div>
    </div>
    <!-- fim modal (editar/excluir/add)  -->

    <hr class="divider" style="margin-bottom: 0;">

    <div class="container">
        <footer class="py-5">
            <div class="row">
                <div class="logo col-6 col-md-3 mb-3" style="width: 300px; height: 300px;">
                    <img src="img/logoPI.png" alt="Logo" width="300px" height="300px">
                </div>

                <div class="col-6 col-md-2 mb-3">
                    <h5>Section</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">Home</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">Features</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">Pricing</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">FAQs</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">About</a></li>
                    </ul>
                </div>

                <div class="col-6 col-md-2 mb-3">
                    <h5>Section</h5>
                    <ul class="nav flex-column">
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">Home</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">Features</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">Pricing</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">FAQs</a></li>
                        <li class="nav-item mb-2"><a href="#" class="nav-link p-0 text-body-secondary">About</a></li>
                    </ul>
                </div>

                <div class="col-md-4 mb-3" style="max-width: 250px;">
                    <h5 class="mb-2">Receba Notificações por email</h5>
                    <form class="d-flex flex-column flex-sm-row">
                        <label for="newsletter1" class="visually-hidden">Seu melhor Email</label>
                        <input id="newsletter1" type="email" class="form-control me-2 mb-2 mb-sm-0"
                            style="max-width: 150px; height: 35px;" placeholder="Email address">
                        <button class="btn btn-primary btn-sm" type="button">Enviar</button>
                    </form>
                </div>

            </div>
        </footer>
    </div>

    <hr class="border-1 opacity-100" style="margin: 0; color:rgb(19, 19, 19)" />
    <div class="container">

        <div class="d-flex flex-column flex-sm-row justify-content-between py-4 my-0">
            <ul class="list-unstyled d-flex">
                <p>© 2024 Sunset Park.</p>
                <li class="ms-3"><a class="link-body-emphasis" href="#"><img src="img/whatsapp (1).png" alt="Whatsapp"
                            width="24px" height="24px"></a></li>
                <li class="ms-3"><a class="link-body-emphasis" href="#"><img src="img/instagram.png" alt="Intagram"
                            width="24px" height="24px"></a></li>
                <li class="ms-3"><a class="link-body-emphasis" href="#"><img src="img/youtube.png" alt="Youtube"
                            width="24px" height="24px"></a></li>
            </ul>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <!-- Warning Section Starts -->
    <!-- Older IE warning message -->
    <!--[if lt IE 10]>
<div class="ie-warning">
    <h1>Warning!!</h1>
    <p>You are using an outdated version of Internet Explorer, please upgrade <br/>to any of the following web browsers
        to access this website.</p>
    <div class="iew-container">
        <ul class="iew-download">
            <li>
                <a href="http://www.google.com/chrome/">
                    <img src="../files/assets/images/browser/chrome.png" alt="Chrome">
                    <div>Chrome</div>
                </a>
            </li>
            <li>
                <a href="https://www.mozilla.org/en-US/firefox/new/">
                    <img src="../files/assets/images/browser/firefox.png" alt="Firefox">
                    <div>Firefox</div>
                </a>
            </li>
            <li>
                <a href="http://www.opera.com">
                    <img src="../files/assets/images/browser/opera.png" alt="Opera">
                    <div>Opera</div>
                </a>
            </li>
            <li>
                <a href="https://www.apple.com/safari/">
                    <img src="../files/assets/images/browser/safari.png" alt="Safari">
                    <div>Safari</div>
                </a>
            </li>
            <li>
                <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie">
                    <img src="../files/assets/images/browser/ie.png" alt="">
                    <div>IE (9 & above)</div>
                </a>
            </li>
        </ul>
    </div>
    <p>Sorry for the inconvenience!</p>
</div>
<![endif]-->
    <!-- Warning Section Ends -->
    <!-- Required Jquery -->
    <script type="text/javascript" src="files\bower_components\jquery\js\jquery.min.js"></script>
    <script type="text/javascript" src="files\bower_components\jquery-ui\js\jquery-ui.min.js"></script>
    <script type="text/javascript" src="files\bower_components\popper.js\js\popper.min.js"></script>
    <script type="text/javascript" src="files\bower_components\bootstrap\js\bootstrap.min.js"></script>
    <!-- jquery slimscroll js -->
    <script type="text/javascript" src="files\bower_components\jquery-slimscroll\js\jquery.slimscroll.js"></script>
    <!-- modernizr js -->
    <script type="text/javascript" src="files\bower_components\modernizr\js\modernizr.js"></script>
    <script type="text/javascript" src="files\bower_components\modernizr\js\css-scrollbars.js"></script>

    <!-- data-table js -->
    <script src="files\bower_components\datatables.net\js\jquery.dataTables.min.js"></script>
    <script src="files\bower_components\datatables.net-buttons\js\dataTables.buttons.min.js"></script>
    <script src="files\assets\pages\data-table\js\jszip.min.js"></script>
    <script src="files\assets\pages\data-table\js\pdfmake.min.js"></script>
    <script src="files\assets\pages\data-table\js\vfs_fonts.js"></script>
    <script src="files\bower_components\datatables.net-buttons\js\buttons.print.min.js"></script>
    <script src="files\bower_components\datatables.net-buttons\js\buttons.html5.min.js"></script>
    <script src="files\bower_components\datatables.net-bs4\js\dataTables.bootstrap4.min.js"></script>
    <script src="files\bower_components\datatables.net-responsive\js\dataTables.responsive.min.js"></script>
    <script src="files\bower_components\datatables.net-responsive-bs4\js\responsive.bootstrap4.min.js"></script>
    <!-- i18next.min.js -->
    <script type="text/javascript" src="files\bower_components\i18next\js\i18next.min.js"></script>
    <script type="text/javascript"
        src="files\bower_components\i18next-xhr-backend\js\i18nextXHRBackend.min.js"></script>
    <script type="text/javascript"
        src="files\bower_components\i18next-browser-languagedetector\js\i18nextBrowserLanguageDetector.min.js"></script>
    <script type="text/javascript" src="files\bower_components\jquery-i18next\js\jquery-i18next.min.js"></script>
    <!-- Custom js -->
    <script src="files\assets\pages\data-table\js\data-table-custom.js"></script>

    <script src="files\assets\js\pcoded.min.js"></script>
    <script src="files\assets\js\vartical-layout.min.js"></script>
    <script src="files\assets\js\jquery.mCustomScrollbar.concat.min.js"></script>
    <script type="text/javascript" src="files\assets\js\script.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>

    <script>
        // tabela 1 
        var users = [];
        document.addEventListener("DOMContentLoaded", function () {
            // mudanças (editar/excluir/add)
            const modalAdicionar = document.getElementById("modalAdicionar");
            const formAdicionar = document.getElementById("formAdicionar");

            // Função para abrir o modal de adicionar usuário
            function abrirModalAdicionar() {
                modalAdicionar.style.display = "block";
            }

            // Função para fechar o modal de adicionar usuário
            function fecharModalAdicionar() {
                modalAdicionar.style.display = "none";
            }

            // Adiciona um evento de clique ao botão de adicionar usuário para abrir o modal
            document.getElementById("btnAbrirModalAdicionar").addEventListener("click", abrirModalAdicionar);

            // Adiciona um evento de envio ao formulário de adicionar usuário
            formAdicionar.addEventListener("submit", async function (event) {
                event.preventDefault();

                // Obtenha os valores dos campos do formulário
                const nome = document.getElementById("nomeAdicionar").value;
                const email = document.getElementById("emailAdicionar").value;
                const nome_usuario = document.getElementById("nome_usuarioAdicionar").value;

                // Aqui você pode fazer o que quiser com os valores, como enviá-los para o backend
                try {
                    const response = await fetch('http://localhost:3000/user');
                    const result = await response.json();
                    const userExists = result.users.filter(user => user.email === email);

                    if (userExists.length > 0) {
                        alert('O email já existe. Por favor, escolha um email diferente.');
                    } else {
                        const newUser = {
                            nome_completo: nome,
                            usuario: nome_usuario,
                            email: email,
                            tipo: "Cliente"
                        };

                        const registerResponse = await fetch('http://localhost:3000/user', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(newUser)
                        });

                        if (registerResponse.ok) {
                            alert('Cadastro realizado com sucesso!');
                            carregarUsers()
                        } else {
                            alert('Cadastro falhou');
                        }
                    }
                } catch (error) {
                    console.error('Erro ao registrar usuário:', error);
                    alert('Um erro ocorreu. Por favor, tente novamente mais tarde.');
                }

                // Após lidar com os valores, feche o modal
                fecharModalAdicionar();
            });
            //   fim mudanças (editar/excluir/add)

            async function carregarUsers() {
                try {
                    const response = await fetch("http://localhost:3000/user");
                    const data = await response.json();
                    users = data.users;
                    console.log("Users carregados: ", users);
                    exibirUsers();
                } catch (error) {
                    console.error("Erro ao carregar users: ", error);
                }
            }

            function exibirUsers() {
                const listaUsers = document.getElementById("lista-users1");
                listaUsers.innerHTML = "";

                users.forEach((user, index) => {
                    const row = criarUser(user, index);
                    listaUsers.appendChild(row);
                });
            }

            function criarUser(user, index, id) {
                const row = document.createElement("tr");

                if (user.tipo == "Cliente") {
                    const idUser = user.id

                    const tdNome = document.createElement("td");
                    tdNome.textContent = user.nome_completo;

                    const tdTipo = document.createElement("td");

                    tdTipo.textContent = user.tipo;

                    const tdQuantidade = document.createElement("td");
                    tdQuantidade.textContent = user.quantidade;

                    const tdData = document.createElement("td");
                    tdData.textContent = user.data;

                    const tdValor = document.createElement("td");
                    tdValor.textContent = user.valor;

                    // <button type="button" id="btn-excluir"class="btn-excluir">
                    //     <i class="icofont icofont-delete-alt"></i>
                    // </button>

                    const tdEditar = document.createElement("td");
                    const aEditar = document.createElement("a");
                    aEditar.classList.add("btn-abrirEditar")
                    const iconeEditar = document.createElement("i");
                    iconeEditar.classList.add("icofont", "icofont-edit-alt");
                    aEditar.addEventListener("click", () => {
                        abrirModalEditar(user, index)
                    });
                    aEditar.appendChild(iconeEditar);
                    tdEditar.appendChild(aEditar);
                    
                    const tdExcluir = document.createElement("td");
                    const aExcluir = document.createElement("button");
                    const iconeExcluir = document.createElement("i");
                    iconeExcluir.classList.add("icofont", "icofont-delete-alt");
                    aExcluir.addEventListener("click",()=>{
                        excluirUser(idUser)
                    })
                    aExcluir.appendChild(iconeExcluir);
                    tdExcluir.appendChild(aExcluir);

                    row.appendChild(tdNome);
                    row.appendChild(tdTipo);
                    row.appendChild(tdQuantidade);
                    row.appendChild(tdData);
                    row.appendChild(tdValor);
                    row.appendChild(tdEditar);
                    row.appendChild(tdExcluir);

                    // // mudanças (excluir/editar/add)

                    // const btnAtualizar = document.createElement("button");
                    // btnAtualizar.textContent = "Edit"
                    // btnAtualizar.classList.add("btn-abrirEditar")
                    // btnAtualizar.addEventListener("click", () => {
                    //     abrirModalEditar(user, index)
                    // });


                    // row.appendChild(btnAtualizar);
                    // fim mudanças (excluir/editar/add)

                }
                return row;
            }

            // mudanças (editar/excluir/add) 
            async function excluirUser(id) {
                if (confirm("Tem certeza de que deseja excluir este usuário?")) {
                    try {
                        const response = await fetch(`http://localhost:3000/user/${id}`, {
                            method: 'DELETE'
                        });

                        if (!response.ok) {
                            throw new Error('Erro ao deletar usuário');
                        }

                        alert("Usuário deletado com sucesso");
                        carregarUsers();

                    } catch (error) {
                        console.error('Erro ao deletar usuário:', error);
                        alert("Erro ao deletar usuário");
                    }
                }
            }

            function abrirModalEditar(user, index) {
                const modal = document.getElementById("modal-editar");
                const form = document.getElementById("form-editar");

                form.reset();

                form.querySelector("#id").value = user.id;
                form.querySelector("#nome").value = user.nome_completo;
                form.querySelector("#email").value = user.email;

                modal.style.display = "block"

                form.onsubmit = async function (event) {
                    event.preventDefault();



                    users[index].id = form.querySelector("#id").value,
                        users[index].nome_completo = form.querySelector("#nome").value,
                        users[index].email = form.querySelector("#email").value

                    try {
                        console.log(users[index]);
                        const response = await fetch(`http://localhost:3000/user/${user.id}`, {
                            method: 'PUT',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(users[index])
                        });

                        if (!response.ok) {
                            throw new Error('Erro ao atualizar usuário');
                        }

                        // Fechando o modal após a atualização
                        modal.style.display = "none";

                        // Recarregando os usuários após a atualização
                        carregarUsers();

                    } catch (error) {
                        console.error('Erro ao atualizar usuário:', error);
                    }

                    modal.style.display = "none";

                    exibirUsers();
                }

                document.getElementById("btn-excluir").onclick = function () {
                    excluirUser(user.id);
                    modal.style.display = "none"
                }

            }

            const modalAtualizar = document.getElementById("modal-editar");
            const closeBtnAtualizar = modalAtualizar.querySelector(".close-editar");
            closeBtnAtualizar.onclick = function () {
                modalAtualizar.style.display = "none";
            }

            const closeBtnAdicionar = modalAdicionar.querySelector(".close-adicionar");
            closeBtnAdicionar.onclick = function () {
                modalAdicionar.style.display = "none";
            }

            window.onclick = function (event) {
                if (event.target === modalAdicionar) {
                    modalAdicionar.style.display = "none"
                }
                else if (event.target === modalAtualizar) {
                    modalAtualizar.style.display = "none"
                }
            }
            // fim mudanças (editar/excluir/add) 

            document.addEventListener("DOMContentLoaded", () => {
                carregarUsers();
            });
            carregarUsers();
        })
        // fim tabela 1 

        // tabela 2 
        var users = [];
        document.addEventListener("DOMContentLoaded", function () {


            async function carregarUsers() {
                try {
                    const response = await fetch("http://localhost:3000/user");
                    const data = await response.json();
                    users = data.users;
                    console.log("Users carregados: ", users);
                    exibirUsers();
                } catch (error) {
                    console.error("Erro ao carregar users: ", error);
                }
            }

            function exibirUsers() {
                const listaUsers = document.getElementById("lista-users2");
                listaUsers.innerHTML = "";

                users.forEach((user, index) => {
                    const row = criarUser(user, index);
                    listaUsers.appendChild(row);
                });
            }

            function criarUser(user, index) {
                const row = document.createElement("tr");

                if (user.tipo == "Funcionario" || user.tipo == "Administrador") {
                    const tdNome = document.createElement("td");
                    tdNome.textContent = user.nome_completo;

                    const tdTipo = document.createElement("td");

                    tdTipo.textContent = user.tipo;

                    const tdQuantidade = document.createElement("td");
                    tdQuantidade.textContent = user.quantidade;

                    const tdData = document.createElement("td");
                    tdData.textContent = user.data;

                    const tdValor = document.createElement("td");
                    tdValor.textContent = user.valor;

                    const tdEditar = document.createElement("td");
                    const aEditar = document.createElement("a");
                    aEditar.href = "#!";
                    const iconeEditar = document.createElement("i");
                    iconeEditar.classList.add("icofont", "icofont-edit-alt");
                    aEditar.appendChild(iconeEditar);
                    tdEditar.appendChild(aEditar);

                    const tdExcluir = document.createElement("td");
                    const aExcluir = document.createElement("a");
                    aExcluir.href = "#!";
                    const iconeExcluir = document.createElement("i");
                    iconeExcluir.classList.add("icofont", "icofont-delete-alt");
                    aExcluir.appendChild(iconeExcluir);
                    tdExcluir.appendChild(aExcluir);

                    row.appendChild(tdNome);
                    row.appendChild(tdTipo);
                    // row.appendChild(tdQuantidade);
                    // row.appendChild(tdData);
                    // row.appendChild(tdValor);
                    row.appendChild(tdEditar);
                    row.appendChild(tdExcluir);

                }
                return row;
            }

            document.addEventListener("DOMContentLoaded", () => {
                carregarUsers();
            });
            carregarUsers();
        })
        // fim tabela 2 

    </script>
</body>

</html>